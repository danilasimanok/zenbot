# zenbot

Программа предназначена для тестирования статей на [Yandex Zen](https://zen.yandex.ru) и оповещения авторов о блокировке через Telegram.

## Инструкция по использованию

### Сборка

1. Перед сборкой заменить `"TOKEN"` на тот, что выдаст BotFather.
1. Установить gradle.
1. Собрать бота командой `gradle shadowJar`

### Запуск

После сбоки бота можно запустить командой `java -jar zenbot.jar <password> <database>`, где

- `password` -- любая строка из цифр и букв;
- `database` -- имя файла, содержащего базу данных (далее -- БД); если такого файла нет, он будет создан;

Если бот запустился, в stdout будут выводиться логи.

### Список команд

- Пароль <password> -- если password совпадает с тем, который был указн при запуске, то пользователь становится администратором. Администратор может быть только один.
- Отслеживать <url> -- если пользователь записан как автор, то бот начнет отслеживать канал, url которого указали, иначе отправит администратору сообщение о том, что новый пользователь хочет стать автором.
- Забыть <url> -- бот перестает отслеживать канал, url которого передали.
- Список статей -- если пользователь записан как автор, то ему будет показан список всех статей во всех отслеживаемых каналах.
- Добавить <user> -- если пользователь -- администратор, то user будет записан как автор; user -- имя в Telegram без символа @.
- Удалить <user> -- если пользователь -- администратор, то user будет удален; user -- имя в Telegram без символа @.
- Список авторов -- если пользователь -- администратор, то ему будет показан список всех авторов из БД.

### Остановка

Для остановки нужно выполнить команду `java -jar zenbot.jar <password>`, где password совпадает с тем, что был введен при запуске. Если все прошло удачно, появится надпись о том, что бот остановлен.